---
interface NavMenuItem {
    title: string;
    href: string;
}

interface Props {
    menuItems?: NavMenuItem[];
}

const {
    menuItems = [
        { title: "Inicio", href: "#home" },
        { title: "Servicios", href: "#services" },
        { title: "Contacto", href: "#contact-form" },
    ],
}: Props = Astro.props;
---

<nav
    class="fixed top-10 inset-x-0 z-50 m-auto flex max-w-fit justify-center rounded-full bg-black/50 py-1 px-2 text-white backdrop-blur-md border border-white/10"
>
    <ul class="relative flex items-center" id="nav-menu">
        <div
            id="nav-backdrop"
            class="absolute left-0 top-0 -z-10 h-full rounded-full bg-white/20 transition-all duration-300 ease-in-out opacity-0"
        >
        </div>

        {
            menuItems.map(({ title, href }) => (
                <li>
                    <a
                        class="relative z-10 inline-block px-4 py-2 text-lg font-lg transition-colors hover:text-white/70"
                        href={href}
                    >
                        {title}
                    </a>
                </li>
            ))
        }
    </ul>
</nav>

<script>
    const backdrop = document.querySelector("#nav-backdrop") as HTMLElement;
    const items = document.querySelectorAll("#nav-menu li");

    function moveBackdrop(element: HTMLElement) {
        const { offsetLeft, offsetWidth, offsetHeight } = element;

        backdrop.style.setProperty("left", `${offsetLeft}px`);
        backdrop.style.setProperty("width", `${offsetWidth}px`);
        backdrop.style.setProperty("height", `${offsetHeight}px`);
        backdrop.style.setProperty("opacity", "1");
    }

    items.forEach((item) => {
        item.addEventListener("click", () => {
            moveBackdrop(item as HTMLElement);
        });
    });

    // Inicializar en el primer elemento al cargar (opcional)
    window.addEventListener("load", () => {
        const firstItem = items[0] as HTMLElement;
        if (firstItem) moveBackdrop(firstItem);
    });
</script>
